\documentclass{article}

%% Created with wxMaxima 0.8.3a

\setlength{\parskip}{\medskipamount}
\setlength{\parindent}{0pt}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}

\begin{document}

\begin{verbatim}
(%i1) /* toric_ideal.wxm
 * Calculating toric ideal.
 * Vladimir Rutsky <altsysrq@gmail.com>
 * 22.12.2009
 */

/* Loading required packages */
load(grobner)$
\end{verbatim}
$$
Loading maxima-grobner \$Revision: 1.6 \$ \$Date: 2009/06/02 07:49:49 \$
$$


\begin{verbatim}
(%i2) /* Generating powers coefficients matrix */
coefsMatrix: genmatrix(lambda([i, j], random(5)), 7, 3)$
display(coefsMatrix)$
\end{verbatim}
$$
coefsMatrix=\begin{pmatrix}2 & 2 & 4\cr 0 & 4 & 1\cr 4 & 0 & 3\cr 3 & 0 & 0\cr 0 & 1 & 4\cr 0 & 4 & 4\cr 2 & 1 & 4\end{pmatrix}
$$


\begin{verbatim}
(%i4) /* Building system of equation corresponding 
   to powers coefficients matrix */
x_variables: []$
y_variables: []$
polynoms: []$
for r: 1 thru length(coefsMatrix) step 1 do (
    monomialMultipliers: [],
    for c:1 thru length(coefsMatrix[1]) step 1 do (
        v: 'x[c],
        monomialMultipliers: 
            append(monomialMultipliers, [v^coefsMatrix[r][c]]),
        x_variables: append(x_variables, [v])
    ),
    v: 'y[r],
    polynoms: 
        append(polynoms, [-v + apply("*", monomialMultipliers)]),
    y_variables: append(y_variables, [v])
)$
all_variables: append(x_variables, y_variables)$

print("Source polynoms:")$
for i: 1 thru length(polynoms) step 1 do
    display(polynoms[i])$
\end{verbatim}
$$
Source polynoms:{polynoms}_{1}={x}_{1}^{2}\,{x}_{2}^{2}\,{x}_{3}^{4}-{y}_{1}{polynoms}_{2}={x}_{2}^{4}\,{x}_{3}-{y}_{2}{polynoms}_{3}={x}_{1}^{4}\,{x}_{3}^{3}-{y}_{3}{polynoms}_{4}={x}_{1}^{3}-{y}_{4}{polynoms}_{5}={x}_{2}\,{x}_{3}^{4}-{y}_{5}{polynoms}_{6}={x}_{2}^{4}\,{x}_{3}^{4}-{y}_{6}{polynoms}_{7}={x}_{1}^{2}\,{x}_{2}\,{x}_{3}^{4}-{y}_{7}
$$


\begin{verbatim}
(%i11) /* Calculating Grobner basis */
poly_monomial_order:'lex$
basis: poly_buchberger(polynoms, all_variables)$
\end{verbatim}


\begin{verbatim}
(%i13) /* Printing some polynoms from founded basis */
print("Basis has", length(basis), "polynoms.")$
display(basis[1])$
display(basis[2])$
display(basis[3])$
for i: 1 thru 4 step 1 do
    display(basis[1 + random(length(basis))])$
display(basis[length(basis) - 1])$
display(basis[length(basis)])$
\end{verbatim}
$$
Basis has147polynoms.{basis}_{1}={x}_{1}^{2}\,{x}_{2}^{2}\,{x}_{3}^{4}-{y}_{1}{basis}_{2}={x}_{2}^{4}\,{x}_{3}-{y}_{2}{basis}_{3}={x}_{1}^{4}\,{x}_{3}^{3}-{y}_{3}{basis}_{24}={y}_{4}^{2}\,{y}_{5}^{3}-{y}_{7}^{3}{basis}_{70}={y}_{3}^{2}\,{y}_{4}\,{y}_{6}\,{y}_{7}-{y}_{1}^{2}\,{x}_{3}^{2}\,{y}_{4}^{3}\,{y}_{5}{basis}_{122}={x}_{3}^{2}\,{y}_{7}^{5}-{y}_{1}\,{y}_{3}^{2}\,{y}_{5}^{3}{basis}_{59}={y}_{1}^{2}\,{y}_{2}^{2}\,{y}_{3}\,{y}_{5}-{x}_{3}\,{y}_{4}^{2}\,{y}_{6}^{3}\,{y}_{7}{basis}_{146}={y}_{2}\,{y}_{3}^{5}-{y}_{4}^{4}\,{y}_{7}^{4}{basis}_{147}={y}_{1}\,{x}_{2}^{14}-{x}_{1}^{2}\,{y}_{2}^{4}
$$


\begin{verbatim}
(%i20) /* Displaying basis polynoms containing only 'y' variables */
for i: 1 thru length(basis) step 1 do (
    /* TODO: Use list magic */
    isFreeOf: 1,
    for j: 1 thru length(x_variables) step 1 do (
        if not freeof(x_variables[j], basis[i]) then (
            isFreeOf: 0,
            return(0)
        )
    ),
    if isFreeOf = 1 then
        display(basis[i])
)$
\end{verbatim}
$$
{basis}_{30}={y}_{2}\,{y}_{3}\,{y}_{7}-{y}_{4}^{2}\,{y}_{5}\,{y}_{6}{basis}_{32}={y}_{4}^{2}\,{y}_{5}^{3}-{y}_{7}^{3}{basis}_{38}={y}_{1}^{3}-{y}_{4}^{2}\,{y}_{5}^{2}\,{y}_{6}{basis}_{41}={y}_{2}\,{y}_{3}\,{y}_{5}^{2}-{y}_{6}\,{y}_{7}^{2}{basis}_{63}={y}_{2}^{2}\,{y}_{3}^{2}\,{y}_{5}-{y}_{4}^{2}\,{y}_{6}^{2}\,{y}_{7}{basis}_{83}={y}_{4}^{4}\,{y}_{6}^{3}-{y}_{2}^{3}\,{y}_{3}^{3}{basis}_{111}={y}_{2}^{2}\,{y}_{7}^{4}-{y}_{3}^{2}\,{y}_{6}^{3}{basis}_{112}={y}_{2}^{3}\,{y}_{5}^{2}\,{y}_{7}^{2}-{y}_{3}\,{y}_{6}^{4}{basis}_{114}={y}_{2}^{2}\,{y}_{4}^{2}\,{y}_{5}^{2}\,{y}_{7}^{3}-{y}_{2}\,{y}_{3}^{3}\,{y}_{5}\,{y}_{6}^{2}{basis}_{116}={y}_{2}\,{y}_{4}^{2}\,{y}_{5}\,{y}_{7}^{3}-{y}_{3}^{3}\,{y}_{6}^{2}{basis}_{121}={y}_{2}\,{y}_{4}^{2}\,{y}_{7}^{5}-{y}_{2}\,{y}_{3}^{4}\,{y}_{5}\,{y}_{6}{basis}_{124}={y}_{4}^{4}\,{y}_{5}\,{y}_{7}^{4}-{y}_{2}\,{y}_{3}^{5}\,{y}_{5}{basis}_{128}={y}_{4}^{4}\,{y}_{5}^{2}\,{y}_{7}^{2}-{y}_{3}^{4}\,{y}_{6}{basis}_{130}={y}_{2}^{4}\,{y}_{5}^{4}-{y}_{6}^{5}{basis}_{131}={y}_{2}^{4}\,{y}_{5}\,{y}_{7}^{3}-{y}_{4}^{2}\,{y}_{6}^{5}{basis}_{133}={y}_{3}^{3}\,{y}_{5}^{2}\,{y}_{6}^{2}-{y}_{2}\,{y}_{7}^{6}{basis}_{141}={y}_{2}^{2}\,{y}_{3}^{5}-{y}_{2}\,{y}_{4}^{4}\,{y}_{7}^{4}{basis}_{142}={y}_{1}\,{y}_{2}\,{y}_{3}^{5}-{y}_{1}\,{y}_{4}^{4}\,{y}_{7}^{4}{basis}_{146}={y}_{2}\,{y}_{3}^{5}-{y}_{4}^{4}\,{y}_{7}^{4}
$$

\end{document}
